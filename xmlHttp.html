<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>api calling part 3...</title>
</head>
<body>
    <div class="d-flex justify-content-center d_spinner">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    <button class="btn btn-sm btn-primary d_data">Click to Data</button>

    
          
       


    <script>
    //create a function defination for button calling
    document.querySelector('.d_data').addEventListener('click',function(){
        
    function myFunction(object,cbfn){
        //XMLHttpReqest() class calling
        var x = new XMLHttpRequest();
        x.open(object.method,object.url);
        x.send();
        x.onload = function(){
            document.querySelector('.d_spinner').remove();
            // console.log(x.responseText);
            cbfn(x.responseText);
        }
        }
        myFunction({url:'https://fakerestapi.azurewebsites.net/api/v1/Books',method:'GET'},function(result){
            console.log(result);
            console.log(typeof result);

            result = JSON.parse(result);

            console.log(result);
            console.log(typeof result);


            var tr = `<table class="table">
                        <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Title</th>
                            <th scope="col">Description</th>
                            <th scope="col">Page Counter</th>
                            <th scope="col">Excerpt</th>
                            <th scope="col">Publish Date</th>
                            <th scope="col">Action</th>
                        </tr>
                        </thead>
                        <tbody>`;
            //get data in loop for get
            result.forEach(element => {
                // console.log(element);
                tr = tr + `  <tr>
                                <td>`+element.id+`</td>
                                <td>`+element.title+`</td>
                                <td>`+element.description+`</td>
                                <td>`+element.pageCount+`</td>
                                <td>`+element.excerpt+`</td>
                                <td>`+element.publishDate+`</td>
                                <td>
                                    <button class="btn btn-sm btn-primary">View</button>    
                                    <button class="btn btn-sm btn-success">Edit</button>    
                                    <button class="btn btn-sm btn-danger">Delete</button>    
                                </td>
                            </tr>`
            });
            tr = tr +` </tbody>
                    </table>`
            // console.log(tr);
            // document.querySelector('.table > tbody').innerHTML = tr;
            document.body.innerHTML = document.body.innerHTML + tr;
        })

    })  
    
    
    </script>
</body>
</html>
